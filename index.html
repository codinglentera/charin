<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title> Mario </title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <canvas id="game" width="900" height="500"></canvas>
  <script src="game.js"></script>
  html,body{
    height:100%;
    margin:0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    display:flex;
    align-items:flex-start;
    justify-content:center;
    background: linear-gradient(#f3f6ff,#ffffff);
    padding:32px;
    box-sizing:border-box;
  }

  .ui {
    width:100%;
    max-width:1000px;
  }

  .controls {
    display:flex;
    gap:12px;
    margin-bottom:16px;
    align-items:center;
  }

  input[type="number"]{
    width:110px;
    padding:6px 8px;
    font-size:16px;
  }

  button{
    padding:8px 12px;
    font-size:15px;
    cursor:pointer;
  }

  #cha-container{
    display:flex;
    flex-wrap:wrap;
    gap:var(--gap);
    background: #fff;
    padding:16px;
    border-radius:8px;
    min-height:240px;
    box-shadow:0 6px 18px rgba(0,0,0,0.06);
  }

  .cha{
    display:inline-block;
    padding:8px 12px;
    font-size:var(--font-size);
    background:var(--tile-bg);
    border-radius:6px;
    user-select:none;
  }

  /* quick helper for "fill viewport" demo */
  .fill-grid {
    display:grid;
    grid-template-columns: repeat(auto-fill,minmax(80px,1fr));
    gap:12px;
  }

  footer{
    margin-top:12px;
    color:#555;
    font-size:14px;
  }
</style>
</head>
<body>
  <div class="ui">
    <div class="controls" aria-label="controls">
      <label for="count">Count:</label>
      <input id="count" type="number" min="1" value="100" />
      <button id="generate">Generate</button>
      <button id="append">Append 10</button>
      <button id="clear">Clear</button>
      <button id="fill">Fill viewport</button>
    </div>

    <div id="cha-container" aria-live="polite"></div>

    <footer>
      Tip: use "Generate" to create a specific number of "cha" items, "Append 10" to add more,
      "Fill viewport" creates a grid that fills the container.
    </footer>
  </div>

<script>
  const container = document.getElementById('cha-container');
  const countInput = document.getElementById('count');
  const generateBtn = document.getElementById('generate');
  const appendBtn = document.getElementById('append');
  const clearBtn = document.getElementById('clear');
  const fillBtn = document.getElementById('fill');

  function createChaElement() {
    const el = document.createElement('span');
    el.className = 'cha';
    el.textContent = 'cha';
    return el;
  }

  function generate(count) {
    // remove any special layout class
    container.classList.remove('fill-grid');

    // efficient bulk append using DocumentFragment
    const frag = document.createDocumentFragment();
    for (let i = 0; i < count; i++) {
      frag.appendChild(createChaElement());
    }
    // replace existing children
    container.innerHTML = '';
    container.appendChild(frag);
    container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
  }

  function append(count) {
    const frag = document.createDocumentFragment();
    for (let i = 0; i < count; i++) {
      frag.appendChild(createChaElement());
    }
    container.appendChild(frag);
  }

  function clearAll() {
    container.innerHTML = '';
  }

  function fillViewport() {
    // change layout to grid and compute approximate number of tiles to fill visually
    container.classList.add('fill-grid');
    container.innerHTML = '';

    // estimate how many tiles across and down (based on sample tile size)
    const sampleWidth = 100; // px (minmax used in CSS)
    const sampleHeight = 48; // px approx (tile height)
    // compute container size in px
    const rect = container.getBoundingClientRect();
    const cols = Math.max(1, Math.floor(rect.width / sampleWidth));
    const rows = Math.max(1, Math.floor((window.innerHeight - rect.top) / sampleHeight));
    const total = cols * rows;
    const frag = document.createDocumentFragment();
    for (let i = 0; i < total; i++) frag.appendChild(createChaElement());
    container.appendChild(frag);
  }

  generateBtn.addEventListener('click', () => {
    const n = Math.max(1, Math.floor(Number(countInput.value) || 0));
    generate(n);
  });

  appendBtn.addEventListener('click', () => append(10));
  clearBtn.addEventListener('click', () => clearAll());
  fillBtn.addEventListener('click', () => fillViewport());

  // initial demo
  generate(Number(countInput.value) || 50);
</script>
</body>
</html>
